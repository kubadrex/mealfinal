<section data-ng-controller="PizzasController" data-ng-init="find()">
    <div class="page-header">
        <h1>Pizzas</h1>
    </div>
      <div class="col-xs-12 col-sm-12 row-margin">
        <div class="input-group input-group-lg">
          <input type="text" class="form-control" placeholder="Type your fav pizza or ingredient!" ng-model="searchText">
          <span class="input-group-btn">
            <button class="btn btn-default" type="button">Go!</button>
          </span>
        </div>
      </div>
    <div class="list-group pizzas">
      <div class="col-xs-12  col-sm-6 col-md-4 text-center element-padding" data-ng-repeat="pizza in pizzas | filter:searchText">
          <a data-ng-href="#!/pizzas/{{pizza._id}}"
             class="list-group-item"
             data-ng-show="((authentication.user) && (authentication.user.roles.indexOf('admin') > -1))">

              <img src="modules/pizzas/img/chili.jpg" class="img-responsive">
              <h4>{{pizza.pizzaName}}</h4>
              <h4>({{pizza.ingredients}})</h4>
              <div class="row row-separator">
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (S)"
                        price="{{pizza.smallPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.smallPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Small</div>
                </div>
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (M)"
                        price="{{pizza.mediumPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.mediumPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Medium</div>
                </div>
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (XL)"
                        price="{{pizza.bigPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.bigPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Large</div>
                </div>
              </div>
          </a>

          <span class="list-group-item"
                    data-ng-show="((authentication.user) && (authentication.user.roles.indexOf('admin') === -1))">
            <img src="modules/pizzas/img/chili.jpg" class="img-responsive">
              <h4>{{pizza.pizzaName}}</h4>
              <h4>({{pizza.ingredients}})</h4>
              <div class="row row-separator">
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (S)"
                        price="{{pizza.smallPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.smallPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Small</div>
                </div>
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (M)"
                        price="{{pizza.mediumPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.mediumPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Medium</div>
                </div>
                <div class="col-sm-4">
                  <div>
                      <ngcart-addtocart
                        id="{{pizza._id}}"
                        quantity="1"
                        quantity-max="5"
                        name="{{pizza.pizzaName}} (XL)"
                        price="{{pizza.bigPrice}}"
                        template-url="modules/cart/views/addtocart.html"
                        data="pizza">{{pizza.bigPrice | priceFromPence}}</ngcart-addtocart>
                  </div>
                  <div class="col-sm-12 pizza-size">Large</div>
                </div>
              </div>
          </span>

      </div>

			<h4 class="list-group-item-heading" data-ng-bind="pizza.name"></h4>

    </div>
    <div class="alert alert-warning text-center" data-ng-hide="!pizzas.$resolved || pizzas.length">
    	No Pizzas yet, why don't you <a href="/#!/pizzas/create">create one</a>?
    </div>
</section>
